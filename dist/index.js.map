{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios, { Axios } from 'axios';\n\n\nconst axiosInstance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '51947896-8b6dd47fcc424a89819094ddf',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n   \n    per_page: 15\n  }\n});\n\n\n\nexport async function getImagesByQuery(query, page){\n  try{\n const response = await axiosInstance.get('', {\n        params: {q: query, page}\n    })\n    return{\n      hits: response.data.hits,\n      totalHits: response.data.totalHits\n    } \n\n} catch(error) {\n  console.error(\"помилка!\", error);\n}\n  }\n ","import SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightboxInstance;\n\n\n// СТВОРЕННЯ РОЗМІТКИ\nexport function createGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n  \n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, downloads, comments}) => `\n    <a href=\"${largeImageURL}\" class=\"gallery_item elem-js\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n\n<ul class=\"stats-container\">\n  <li class=\"stat-item\">\n    <span>Likes</span>\n    <span>${likes}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Views</span>\n    <span>${views}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Comments</span>\n    <span>${comments}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Downloads</span>\n    <span>${downloads}</span>\n  </li>\n</ul>\n    </a>\n  `).join('');\n\n  galleryContainer.innerHTML = markup;\n\n  if (!lightboxInstance) {\n    lightboxInstance = new SimpleLightbox('.gallery a');\n  } else {\n    lightboxInstance.refresh();\n  }}\n\n  // ОЧИСТИТИ ГАЛЕРЕЮ\n  export function clearGallery() {\n  const galleryContainer = document.querySelector('.gallery');\n  galleryContainer.innerHTML = '';\n}\n\n// ПОКАЗАТИ ЛОАДЕР\nexport function showLoader(){\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.remove('is-not-active');\n  } else {\n    console.warn('Loader element not found');\n  }\n}\n// ЗХОВАТИ ЛОАДЕР\nexport function hideLoader(){\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.add('is-not-active');\n  } else {\n    console.warn('Loader element not found in hideLoader');\n  }\n}\n\n// ПОКАЗАТИ КНОПКУ \"MORE PAGE\"\nexport function showLoadMoreButton(){\n  const button = document.querySelector('.button-js')\n  button.classList.remove('is-not-active')\n}\n\n// СХОВАТИ КНОПКУ \"MORE PAGE\"\nexport function hideLoadMoreButton(){\n  const button = document.querySelector('.button-js')\n  button.classList.add('is-not-active')\n}\n\n// ДОДАТИ ГАЛЕРЕЮ\n\nexport function createMoreGallery(images){\n\n\n    const galleryContainer = document.querySelector('.gallery');\n  \n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, downloads, comments}) => `\n    <a href=\"${largeImageURL}\" class=\"gallery_item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n\n<ul class=\"stats-container\">\n  <li class=\"stat-item\">\n    <span>Likes</span>\n    <span>${likes}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Views</span>\n    <span>${views}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Comments</span>\n    <span>${comments}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Downloads</span>\n    <span>${downloads}</span>\n  </li>\n</ul>\n    </a>\n  `).join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup)\n  \n\n  if (!lightboxInstance) {\n    lightboxInstance = new SimpleLightbox('.gallery a');\n  } else {\n    lightboxInstance.refresh();\n  }}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, hideLoadMoreButton, showLoadMoreButton } from \"./js/render-functions\";\nimport { showLoader } from \"./js/render-functions\";\nimport { hideLoader } from \"./js/render-functions\";\nimport { clearGallery } from \"./js/render-functions\";\nimport { createMoreGallery } from \"./js/render-functions\";\n\n\nconst form = document.querySelector('.form')\nconst searchText = document.querySelector('[name=\"search-text\"]')\nconst buttonLoadMore = document.querySelector('.button-js')\nconst per_page = 15;\n\nlet totalHitsValue = ''\nlet page = 1;\nlet searchTextValue = '';\nfunction smoothScroll() {\n  const elements = document.querySelectorAll('.elem-js');\n  const lastElement = elements[elements.length - 1];\n  if (!lastElement) return;\n  const height = lastElement.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height,\n    behavior: 'smooth'\n  });\n}\n\nform.addEventListener('submit', (e)=>{\n    e.preventDefault();\n    searchTextValue = searchText.value.trim()\n    \n    console.log(searchText.value)\n if(searchText.value.trim() === ''){\n          iziToast.error({\n                message: 'enter text, please!',\n            })  \n          return\n        }\n    clearGallery()\n    showLoader()\n    page = 1;\n    async function getImagesFunction(searchTextValue, page) {\n      try {\n        const {hits, totalHits} = await getImagesByQuery(searchTextValue, page)\n        const totalPages = Math.ceil(totalHits / per_page)\n        if (hits.length === 0){\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            }) \n            hideLoadMoreButton()\n            return\n        } else if (page >= totalPages){\n          iziToast.show({\n          message: 'Were sorry, but youve reached the end of search results.'\n          })\n          hideLoadMoreButton()\n          createGallery(hits)\n          return\n          }\n        createGallery(hits)\n        showLoadMoreButton()\n        }\n      catch(err){\n      iziToast.error({\n        message: 'Please try again later'\n      })\n      console.error(err)\n    }\n      finally{\n      hideLoader()\n    }\n}\ngetImagesFunction(searchTextValue, page);\n\n});\n\n  \nbuttonLoadMore.addEventListener('click', async ()=>{\n\n  hideLoadMoreButton()\n  showLoader()\n  try{\n    const {hits, totalHits} = await getImagesByQuery(searchTextValue, ++page)\n    const totalPages = Math.ceil(totalHits / per_page) \n    if (page >= totalPages){\n    iziToast.show({\n      message: 'Were sorry, but youve reached the end of search results.'\n    })\n    hideLoadMoreButton()\n    createMoreGallery(hits)\n    smoothScroll()\n    return\n  }\n  createMoreGallery(hits)\n    smoothScroll()\n    showLoadMoreButton()\n  }\n  \n  catch (error){\n  console.error(error)\n}\nfinally{\nhideLoader()\n\n}\n})"],"names":["axiosInstance","axios","getImagesByQuery","query","page","response","error","lightboxInstance","createGallery","images","galleryContainer","markup","webformatURL","largeImageURL","tags","likes","views","downloads","comments","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","createMoreGallery","form","searchText","buttonLoadMore","per_page","searchTextValue","smoothScroll","elements","lastElement","height","iziToast","getImagesFunction","hits","totalHits","totalPages","err"],"mappings":"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"}